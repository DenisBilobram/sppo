# Управление файлами в SVR4

1. Process Control Block (user_t)
    * В PCB хранится информация о процессе, в том числе список открытых им файлов в u_finfo->fi_list

2. File Descriptors (uf_entry[])
    * Каждый открытый файл имеет дескриптор (число) - 0, 1, 2 (стандартные потоки) и т.д.
    * В массиве uf_entry[] хранится, к какому реальному файлу относится данный дескриптор.

3. File Structure (file_t)
    * Внутреняя структура ядра, которая содержит:
        * f_vnode - указатель на vnode (виртуальный объект файла/каталога/устройства)
        * Текущее смещение
        * Флаги
        * Счётчик ссылок
4. Virtuals FS (vnode_t)
    * vnode - единая виртуальная абстракция в слое VFS (Virtual File System)
    * VFS позволяет одинаково работать с разными файловыми системами (и с обычной, и с сетевой, и устройством)

5. Devices и inodes
    * Если файл - это устройство, vnode->snode указывает на соответсвующий драйвер
    * Если файл - обычный (на диске), vnode->inode указывает на таблицу с информацией о блоках, правах, владельцах и т.д.
 
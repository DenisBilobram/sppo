# Архитектура и основные подсистемы Linux. Linux Kernel Map.

# Архитектура и основные подсистемы Linux

Ниже кратко описаны основные компоненты ядра Linux (Linux Kernel), его подсистемы и их взаимодействия.

---

## 1. Подсистема процессов и планировщик
- **Создание и управление процессами**: осуществляются системными вызовами (`fork`, `exec`, `wait`, и т. д.).
- **Планировщик (Scheduler)**: решает, какой поток (thread) получит процессор в следующий момент, применяя разные политики (CFS, RT…).
- **Синхронизация**: механизмы блокировок (mutex, spinlock), очередей, семафоров для безопасной работы многопоточности.

---

## 2. Виртуальная память
- **Выделение виртуальной памяти**: каждому процессу предоставляется собственное виртуальное адресное пространство.
- **Управление страницами**: когда процесс обращается к отсутствующей странице (page fault), ядро подкачивает её из swap или из файла.
- **Свопинг (Swapping)**: если не хватает оперативной памяти, неактивные страницы могут быть выгружены на диск (swap).

---

## 3. Физическая память
- **Страница (page)** — базовая единица выделения (обычно 4 КБ).  
- **Рамки (frames)** — соответствующие куски физической памяти.  
- **Аллокатор физ. памяти**: управляет пулом свободных фреймов, выделяет/освобождает их для виртуальной подсистемы.

---

## 4. Файловая система (VFS — Virtual File System)
- **Глобальное иерархическое пространство имен**: `/` — корень, далее каталоги и файлы.
- **Абстрактный слой (VFS)**: предоставляет единый интерфейс для разных реальных FS (ext4, XFS, NFS и т. д.).
- **Структуры inode, dentry**: хранят метаданные о файлах (права, владельцы, расположение на диске).

---

## 5. Подсистема ввода-вывода и драйверы
- **Драйверы блочных устройств** (Block devices): диски, CD/DVD, флеш-накопители (чтение/запись большими блоками).
- **Драйверы символьных устройств** (Character devices): терминалы, модемы, звуковые карты (передача данных по байтам/потокам).
- **Псевдо-устройства** (pty, ramdisk): эмулируют устройства в софте.

---

## 6. Подсистема сети
- **Сокеты (sockets)**: реализация TCP/IP стеков, протоколы (IPv4, IPv6, UDP, TCP…).
- **Netfilter / iptables**: брандмауэр, контроль и обработка пакетов.
- **Различные драйверы сетевых карт** (Ethernet, Wi-Fi, etc.).

---

## 7. Аппаратная абстракция и платформозависимый код
- **Arch-specific**: поддержка разных архитектур (x86, ARM, PowerPC, RISC-V…).  
- **Инициализация системы** (загрузка ядра, настройка прерываний, MMU).

---

## 8. Прочие компоненты
- **Безопасность (LSM: SELinux, AppArmor)**: механизмы усиленного контроля доступа.
- **Debugging/tracing**: инструменты для отладки ядра (ftrace, perf, kdump).
- **Power management**: управление питанием, режимами энергосбережения.

---


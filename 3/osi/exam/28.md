# Процессы в ОС Unix SVR4. Диаграмма состояний, основные структуры.

```
В Unix SVR4 процессы представляются набором структур, которые содержат всю необходимую информацию для управления и планирования их выполнения. Основным элементов является управляющий блок процесса PCB, который хранится в таблице процессов.
```

## Основные состояния и переходы

1. Created
    * Смысл: процесс только что создан
    * Возможные переходы:
        * Created -> Ready (mem) если достаточно памяти
        * Created -> Ready (swpd) если оперативной памяти не достаточно
2. Ready (swpd)
    * Смысл: процесс создан но вытеснен на диск
    * Возможные переходы:
        * Ready (swpd) -> Ready (mem) при swap in процесс загружается в память
3. Ready (mem)
    * Смысл: процесс создан, находится в памяти и ждет пока sheduler выделит ему время на выполенние.
    * Возможные переходы:
        * Ready (mem) -> Kernel running когда планировщик выбирает этот процесс для выполнения
        * Ready (mem) -> Ready (swpd) если системе не хватает памяти
4. Sleep (swpd)
    * Смысл: ожидает какого-то события при этом выгружен на диск
    * Возможные переходы: 
        * Sleep (swpd) -> Sleep (mem) при swap in
5. Sleep (mem)
    * Смысл: ожидает какого-тог события при этом в памяти
    * Возможные переходы:
        * Sleep (mem) -> Ready (mem) при возникновении ожидаемого события
        * Sleep (swpd) -> при swap out
6. Kernel running
    * Смысл: процесс выполняется в режиме ядра
    * Возможные переходы:
        * Sleep если процесс ожидает какого-то события
        * Zombie если процесс завершился
        * Preempted если процесс был вытеснес из-за более приоритетного
        * User running после завершения системного вызова или обработки прерывания
7. User running
    * Смысл: прцоесс выполняется в режиме пользователя
    * Возможные переходы:
        * User running -> Kernel running при системном вызове или обработке исключения
8. Preempted
    * Смысл: процесс временно приостановлен так как был вытеснен более приоритетным
    * Возможные переходы:
        Preempted -> User Running когда процессу снова выделяется квант времени
9. Zombie
    * Смысл: процесс завершился, но информация о нем ещё хранится в таблице процессов поскольку родитель ещё не вызвал wait()


## Основные структуры

* proc_t: главная структура процесса, хранит базовую информацию о процессе, по типу PID, адресного пространства, указателя на потоки и т.д.
* user_t: пользовательская часть данных процессора
* kthread_t: описывает поток
* klwp_t: хранит контекст выполнения для соотвествующего потока
* tsproc_t: хранит планировачные данные
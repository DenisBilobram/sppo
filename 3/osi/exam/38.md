# Примитивы синхронизации ОС. Неблокирющие примитивы синхронизации и неблокирующие структруы данных.

## Ключевые идеи
* Блокировки (locks) - могут приводить к переключение контекста (это затраты времени и ресурсов)
* Неблокирующие примитивы стараются избежать явных блокировок, используя атомарные операции для кординации доступа к разделяемым ресурсам.
* В результате повышается потенциальная параллельность и снижается риск взаимоблокировок.


## Основные определения
* Wait-free
    1. Гарантия: каждый поток завершает операцию за конечное число шагов, независимо от действий других поткоов
    2. N-step-bound: есть некоторое верхнее ограничение на число операций, необходимых для выполнения некого действия
* Lock-free
    1. Гарантия: в системе всегда происходит прогресс, но не обязательно для каждого потока отдельно.
    2. Если один поток застрял, остальные все равно могут завершить свои операции.
* Obstruction-free
    1. Гарантия: поток завершит операцию, если будет выполнять её без конкуренции.
    2. Возможны ситуации, когда потоки постоянно мешают друг другу и нет стабильного прогресса.

## Атомарные операции
```
Такие операции выполняются за единицу времени на аппаратном уровне и выполняется полностью либо не выполняется вообще, это позволяет реализовать неблокирующие структуры данных. 
```
* CAS (Compare and SWAP)
* FAA (Fetch and add)
* Load-Link / Store-Conditional (LL/SC)

## Неблокирующие структуры данных
* Очереди: lock-free или wait-free реализации
* Стеки: реализация через CAS
* Списки: операции вставки/удаления без блокировки
* Деревья: 


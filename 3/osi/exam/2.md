# Общая организация процессора, памяти, организация вычислений

## Процессор CPU
* Состоит из нескольких ядер, каждое ядро может выполнять поток инструкций.
* Кэш второго уровня L2, общий для всех ядер.
* Кэш первого уровня L1, разделен на кэш с данными, и кэш с инструкциями, оба имеют буфер TLB, это помогает параллельно читать данные и инструкции.
* Буфер ассоциативной трнсляции TLB, хранит данные, которые помогают быстрее найти данные внутри кэша и понять есть ли они в кэше, а так же ускоряет трансляцию вирт. адреса в физический.
* Два набора регистров, для hyper-threading, позволяет быстрее переключать контекст для двух потоков.
* Предсказатель переходов, предсказывает какие команды нужно грузить при условных переходах
* Вычислительный конвеер
    * Instruction fetch
    * Decode 
    * Operation Sheduler 
    * ALu
    * Instr. Pipline
* Write buffer - нужен т.к скорость записи в память может не поспевать за ходом выполнения команд.

## Память

* Организована как иерархия "пирамида памяти"
    1. Регистры CPU - самая быстрая и маленькая память
    2. Кэш L1, L2, L3 - управляется аппаратно, ускоряет доступ к часто используемым данным
    3. Основная память RAM - средний размер, вермя доступа десятки наносекунд
    4. SSD/Жёсткие диски - больший объём и возможность хранить данные без питания
    5. Магнитные ленты - очень объёмны и очень медлены

* Адресация и виртуальная память
    * Память разделена на страницы (обычно 4КБ), единица доступа к памяти, байт
    * Каждый процесс видит виртуальное адресное пространство (адреса обычно начинаются с 0)
    * Специальный блок MMU преобразует виртуальные адреса в физические через таблицы страниц


## Организация вычислений

В современных процессорах используется конвейерная обработка команд. Следующая команда начинает выполняться ещё когда не закончила выполнение предыдущая.

Цикл команды (внутри конвейера)

1. IF (Instruction Fetch) — выборка из памяти (или кэша).
2. ID (Instruction Decode) — декодирование кода операции, определение регистров-операндов.
3. EX (Execution) — выполнение инструкции в ALU (арифметика/логика).
3. MEM (Memory) — при необходимости доступ к памяти (запись или чтение).
4. WB (Write Back) — запись результата в регистры.
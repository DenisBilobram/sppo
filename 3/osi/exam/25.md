# Управляющие таблицы процесса. Образ процесса

## Управляющие таблицы (диспетчерские структуры) ОС

В любой операционной системе существует множество **служебных структур**, которые обеспечивают учёт и управление ресурсами. Среди них можно выделить несколько ключевых групп:

1. **Структуры памяти** (Memory structures)
   - Хранят сведения о распределении физической и виртуальной памяти.
   - Указывают, какие участки памяти выделены под конкретные процессы.
   - Содержат таблицы страниц (page tables), дескрипторы сегментов и прочие механизмы для управления виртуальной памятью.

2. **Файловые структуры** (File structures)
   - Описывают открытые файлы, позиции чтения-записи, права доступа.
   - Таблицы, связанные с файловой системой (inode-таблицы в UNIX-подобных системах).

3. **Структуры устройств** (Device structures)
   - Отслеживают состояние драйверов и текущие операции ввода-вывода (I/O).
   - Содержат информацию о загруженных модулях драйверов, очередях запросов к устройствам и т.п.

4. **Структуры процессов** (Process structures)
   - **Процессные таблицы** (Process Control Block, PCB) — в них хранится:
     - Идентификатор процесса (PID).
     - Состояние процесса (running, ready, blocked и др.).
     - Ресурсы и дескрипторы (открытые файлы, сетевые подключения).
     - Информация о планировании (приоритет, время в ЦП).
     - Указатели на области памяти (таблицы страниц, сегменты).
   - Для каждого процесса могут храниться **динамические** структуры, связанные с ним (потоки, сигналы, контекст выполнения, переменные окружения).

> Управляющие таблицы объединены так, чтобы эффективно взаимодействовать друг с другом:  
> - **Процессы** ссылаются на свои структуры памяти, файлы и устройства.  
> - **Общая таблица** (или несколько таблиц) хранит сводную информацию о состоянии всех процессов в системе.

---

## Образ процесса (Process Image)

**Образ процесса** — это **отображение** (layout) кода и данных процесса в памяти. Можно выделить несколько основных частей:

1. **Текст (Text segment)** 
   - Машинный код программы (скомпилированный исполняемый файл).
   - Обычно только для чтения (в целях защиты).

2. **Данные (Data segment)** 
   - Инициализированные глобальные и статические переменные.
   - В примере на слайде: `static int var_sa`, `static char var_char_data[]`.

3. **BSS (Block Started by Symbol)** 
   - Неинициализированные глобальные или статические переменные.
   - Размещаются в памяти, но в файле занимает минимальный размер (поскольку данные не определены).

4. **Куча (Heap)** 
   - Динамически выделяемая память (например, `malloc` в C).
   - Расширяется или сокращается по мере необходимости.

5. **Стек (Stack)** 
   - Хранение локальных переменных, адресов возврата из функций (frame), параметров вызовов и т.д.
   - Растёт в сторону, противоположную росту кучи.

# Виртуальный страничный обмен. Двухуровневая организация MMU и TLB.

Зачем нужна двухуровневая страничная оргазинация?
1. Сокращение размера таблицы
    * При одноуровневой схеме у каждого процесса была бы огромная таблица.
2. Экономия памяти
    * Двухуровневая структура помогает избежать траты памяти под пустые ветви таблицы.

## Основная идея двухуровневой таблицы
1. Page Direcotry - верхний уровень
    * Далится на записи (PDE), каждая запись запись указывает на таблицу нижнего уровня
    * Индекс PDE берётся из части виртуального адреса и определяет какая именно подтаблица используется для трансляции адреса
2. Page Table - нижний уровень
    * Содержит записи PTE с указанием какой кадр в физической памяти соответствует данной странице
    * Индекс PTE берётся и следующей части виртуального адреса

3. Offset - смещение: оставшиеся биты виртуального адреса определяет положение байта внутри страницы

## TLB (Translation Lookaside Buffer)
1. Зачем
    * Каждый доступ к памяти двух или более чтений при многоуровневых таблицах страниц
    * TLB небольной аппаратный кэщ, где хранятся недавние соотвествия виртуальный адрес -> физ адрес
    * При обращении к памяти процессор сначала проверяет TLB на наличие адреса в кэше
    * В PTE так же есть управляющие биты страницы, R/W/U/V, они так же кэшируются в TLB и могут быть быстро получены

При отсутсвии страницы в памяти возникает Page Fault, ОС загружает страницу с диска, обновляет таблицы, и выполнение продолжается.
# Процессы, проблемы современных процессов. Планирование выполнения процессов и управление ресурсами.

# Процессы и их проблемы

## 1. Понятие «процесс»

1. **Происхождение**: идея процессов позволила представлять выполняющиеся программы как автономные сущности в системе.
2. **Определение (ISO, упрощённо)**:
   - Процесс — совокупность взаимосвязанных операций, преобразующих входящие данные в исходящие.
   - В контексте ОС: *экземпляр программы* во время выполнения.
3. **Процесс как единица активности ОС**:
   - В процессе существует:
     - *Последовательность действий* (инструкций),
     - *Текущее состояние* (регистры, счётчик команд, системные ресурсы),
     - *Набор связанных ресурсов* (открытые файлы, порты и т. д.).

---

## 2. Структура процесса

- **Исполняемая программа**: включает машинный код, данные, статические ресурсы.
- **Набор потоков** (threads) внутри процесса: каждый поток может независимо выполнять часть кода.
- **Адресное пространство** (виртуальная память):
  - Сегмент кода (программа),
  - Сегмент данных (глобальные переменные),
  - Стек (stack) для локальных переменных, вызовов функций,
  - Куча (heap) для динамического выделения памяти,
  - Возможно, подключённые библиотеки (shared libraries).
- **Контекст исполнения**: регистры CPU, состояние (program counter, флаги).
- **Контекст безопасности**: идентификаторы пользователя (UID), группы (GID), права доступа.
- **Ресурсы**: открытые файлы, сетевые соединения и т. п.
- **Связанные структуры ядра**: PCB (Process Control Block) хранит всё, что нужно ядру для управления процессом.

---

## 3. Проблемы современных процессов

1. **Защита памяти**  
   - Необходимо, чтобы один процесс не затрагивал чужие участки памяти.  
   - Иначе поведение программ становится непредсказуемым.  
   - Используется MMU, виртуальная память, чтобы обеспечивать изоляцию.

2. **Взаимные блокировки (Deadlocks)**  
   - Если процессы пытаются получить эксклюзивный доступ к ресурсам и «захватывают их в неправильном порядке», может произойти ситуация, когда никто не может продолжить работу (deadlock).
   - «Starvation» (голодание) — когда один процесс вечно ждёт доступа к ресурсу, а другой его постоянно «обходит».
   - «Livelocks» — процессы не блокированы, но постоянно повторяют действия без прогресса.

3. **Проблемы синхронизации**  
   - Нужно корректно организовать доступ к общим данным (общие переменные, shared memory).  
   - Механизмы синхронизации (мьютексы, семафоры, барьеры) могут быть источником ошибок, если используются неверно.

4. **Взаимное исключение**  
   - Обеспечить, что когда один процесс/поток изменяет ресурс, другой не может в этот момент «вмешаться» и испортить данные.

---

## 4. Планирование выполнения и управление ресурсами

- **Планирование (CPU scheduling)**: выбор, какой процесс (или поток) получит CPU сейчас, и на какой срок (time slice). Цели:
  - Сокращение времени отклика (response time),
  - Увеличение пропускной способности (throughput),
  - Баланс ресурсов,
  - Соблюдение приоритетов.

- **Управление ресурсами**:
  - ОС отслеживает, какие ресурсы (память, файлы, устройства) заняты и кем.
  - При создании процесса выделяется память, назначаются дескрипторы файлов.  
  - При завершении — освобождаются ресурсы.

---
